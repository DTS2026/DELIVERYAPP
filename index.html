<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>DISTRIBUCION I HOJA DE RUTA GRUPODN</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #f5f5f5;
}

header {
    background: #f2c300;
    color: #fff;
    padding: 15px;
    text-align: center;
    font-size: 20px;
    font-weight: bold;
}

.tabs {
    display: flex;
    background: #333;
}

.tab {
    flex: 1;
    padding: 12px;
    text-align: center;
    color: #fff;
    cursor: pointer;
}

.tab.active {
    background: #555;
}

.content {
    display: none;
    padding: 15px;
}

.content.active {
    display: block;
}

input, select {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
}

.card {
    background: #fff;
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 6px;
}

.total {
    font-size: 18px;
    font-weight: bold;
    color: #d32f2f;
    margin-top: 8px;
}

.btn {
    padding: 6px 10px;
    background: #25d366;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 8px;
}

.btn-toggle {
    background: #1976d2;
    margin-top: 6px;
}

.products {
    display: none;
    margin-top: 8px;
    padding-left: 15px;
}
</style>
</head>

<body>

<header>DISTRIBUCION I HOJA DE RUTA GRUPODN</header>

<div class="tabs">
    <div class="tab active" onclick="openTab(0)">üîç Buscador</div>
    <div class="tab" onclick="openTab(1)">üìã Clientes por Vendedor</div>
</div>

<div class="content active">
    <input type="text" id="searchInput" placeholder="Buscar por c√≥digo o nombre de cliente">
    <div id="searchResults"></div>
</div>

<div class="content">
    <select id="sellerFilter" onchange="filterBySeller()">
        <option value="">Seleccione vendedor</option>
    </select>
    <div id="sellerResults"></div>
</div>

<script>
let data = [
    {
        codigo: "C001",
        cliente: "Bodega San Luis",
        vendedor: "Juan",
        conductor: "Pedro Rojas",
        liquidador: "Luis P√©rez",
        placa: "ABC-123",
        telefono: "999888777",
        productos: [
            { nombre: "Arroz", cantidad: 5 },
            { nombre: "Az√∫car", cantidad: 3 }
        ],
        total: 450
    },
    {
        codigo: "C002",
        cliente: "Market Central",
        vendedor: "Juan",
        conductor: "Pedro Rojas",
        liquidador: "Luis P√©rez",
        placa: "ABC-123",
        telefono: "988777666",
        productos: [
            { nombre: "Fideos", cantidad: 10 }
        ],
        total: 300
    }
];

function openTab(index) {
    document.querySelectorAll('.tab').forEach((t,i)=>t.classList.toggle('active', i===index));
    document.querySelectorAll('.content').forEach((c,i)=>c.classList.toggle('active', i===index));
}

let debounceTimer;
document.getElementById("searchInput").addEventListener("input", e => {
    clearTimeout(debounceTimer);
    debounceTimer = setTimeout(() => {
        searchClient(e.target.value.toLowerCase());
    }, 300);
});

function searchClient(text) {
    let results = data.filter(d =>
        d.codigo.toLowerCase().includes(text) ||
        d.cliente.toLowerCase().includes(text)
    );
    render(results, "searchResults");
}

function filterBySeller() {
    let seller = document.getElementById("sellerFilter").value;
    let results = data.filter(d => d.vendedor === seller);
    render(results, "sellerResults");
}

function render(list, containerId) {
    let container = document.getElementById(containerId);
    container.innerHTML = "";

    list.forEach(d => {
        let productsHtml = d.productos.map(p => `‚Ä¢ ${p.nombre} (${p.cantidad})`).join("<br>");

        let msg = `Cliente: ${d.cliente}
Conductor: ${d.conductor}
Liquidador: ${d.liquidador}
Placa: ${d.placa}
Tel√©fono: ${d.telefono}

Productos:
${d.productos.map(p=>`- ${p.nombre} (${p.cantidad})`).join("\n")}

TOTAL: S/ ${d.total}`;

        let card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
            <strong>${d.codigo} - ${d.cliente}</strong><br>
            Conductor: ${d.conductor}<br>
            Liquidador: ${d.liquidador}<br>
            Placa: ${d.placa}<br>
            Tel√©fono: ${d.telefono}<br>

            <button class="btn-toggle" onclick="toggleProducts(this)">Ver productos</button>
            <div class="products">${productsHtml}</div>

            <div class="total">TOTAL: S/ ${d.total}</div>

            <a class="btn" target="_blank"
               href="https://wa.me/?text=${encodeURIComponent(msg)}">
               Compartir por WhatsApp
            </a>
        `;
        container.appendChild(card);
    });
}

function toggleProducts(btn) {
    let prod = btn.nextElementSibling;
    prod.style.display = prod.style.display === "none" ? "block" : "none";
}

function loadSellers() {
    let sellers = [...new Set(data.map(d => d.vendedor))];
    let sel = document.getElementById("sellerFilter");
    sellers.forEach(s => {
        let o = document.createElement("option");
        o.value = s;
        o.textContent = s;
        sel.appendChild(o);
    });
}

loadSellers();
</script>

</body>
</html>
